# K1 Pro 摄像头接口说明

## Processor MIPI CSI2介绍

MIPI CSI-2 最初于2005年推出，为移动设备所使用的标准化相机接口规格，全名为MIPI Camera Serial Interface 2。MIPI CSI-2提供高带宽、低耗电与低电磁干扰的功能，因其易用性且支持高性能应用，包含 1080p、4K、8K 或更高的视频以及高解析度摄像，现在已经成为应用最为广泛的嵌入式摄像头和成像的接口。

详细介绍参考：
[MIPI CSI-2 Specifications](https://www.mipi.org/specifications/csi-2)

## 1.1 MIPI CSI2控制器

K1 Pro的RK3576应用程序处理器支持5个CSI-2接口：
- 4 ports support 2 D-PHY v1.2 data-lane with 2.5Gbps/lane
These 4 ports may be bound as 2 ports with 4 data-lane per port
- 1 port supports 4 D-PHY data-lane or 3 C-PHY trios
D-PHY is v2.0 which lane speed is 4.5Gbps
C-PHY is v1.1 which trio speed is 2.5Gsps
- Each port supports 4 virtual channels


## 1.2 ISP处理器

K1 Pro处理器推出了新一代1600万像素的ISP。它实现了许多算法加速器，如HDR, 3A, CAC, 3DNR, 2DNR,Sharpening, Dehaze, Enhance, Debayer, Small Angle Lens-Distortion Correction等，主要特性：
ISP V3.9
- Support video mode and picture mode
- One channel ISP, 16M pixels
- VICAP/DMA input: raw8/raw10/raw12/raw16
- RGB-IR sensor input
- 3A: include AE/Histogram, AF, AWB statistics output
- BLC: Black Level Correction
- PDAF: Phase Detection Auto Focus
- DPCC: Static/Dynamic defect pixel cluster correction
- LSC: Lens shading correction
- HDR: 2-Frame Merge into High-Dynamic Range
- DRC/TMO: Dynamic Range Compression, Tone mapping in RGB field
- Supports up to 120dB HDR with 20-bit data width
- EXPANDER: Sensor expander
- GIC: Green Imbalance Correction
- Debayer: Advanced Adaptive Demosaic with Chromatic Aberration Correction(CAC)
- CCM/CSM: Color correction matrix; RGB2YUV etc
- Gamma: Gamma out correction
- Dehaze/Enhance: Automatic Dehaze and edge enhancement
- Bay3DNR: Advanced Temporal Noise reduce in RAW
- YUVME: Noise Motion Estimate and Motion Compensation in YUV
- 2DNR: Advanced Spatial Noise reduce in YUV
- Sharp: Picture Sharpening & Edge Enhance in YUV
- CGC: Color Gamut Compression, YUV full range/limit range convert
- 3DLUT: 3D-Lut Color Palette for Customer
- LDCH: Lens-distortion in the horizontal direction
- LDCV: Lens-distortion in the vertical direction
- Gain: Image local gain
- Output Scale*2: support scale down level


## 2. K1 Pro摄像头

K1 pro板上预留了一个4lane的MIPI CSI2S摄像头接口

<span style={{ 
  display: 'flex', 
  justifyContent: 'center',
  margin: '10px 0'
}}>
![alt text](/img/k1pro/hardware/k1pro_camera.png)
</span>

其引脚定义如下：

<span style={{ 
  display: 'flex', 
  justifyContent: 'center',
  margin: '10px 0'
}}>
![图1 K1摄像头接口定义](/img/k1pro/hardware/camera_io.png)
</span>

BIT-BRICK 提供了几款不同规格的摄像头(详情参考bit-brick硬件产品详情页)：

<span style={{ 
  display: 'flex', 
  justifyContent: 'center',
  margin: '10px 0'
}}>
![图1 K1摄像头接口定义](/img/k1/hardware/camera/bit_brick_camera.png)
</span>

用户也可以根据实际的需要自行设计摄像头。已经支持的摄像头传感器如下：

<span style={{ 
  display: 'flex', 
  justifyContent: 'center',
  margin: '10px 0'
}}>
![图1 K1摄像头接口定义](/img/k1/hardware/camera/support_camera.png)
</span>

建议选择上述列表中的传感器，可以减少软件调试的工作量。


